{"name":"Docker Universal Control Plane (UCP)","tagline":"Learn about the finer aspects of the Docker Universal Control Plane (UCP) including hands-on demos, tips, examples and best practices","body":"### Prerequisites to installing Docker UCP\r\nThe following pre-requisites are for UCP v 0.5 (beta). Some of these could change once UCP hits GA, but it is quite unlikely.\r\n* Linux kernel 3.16 or later. (Older kernel versions will work with UCP, but >=3.16 is required if you want to leverage docker's uber cool multi host networking capabilities.)\r\n* Docker version >=1.9 pre-installed on all nodes (Recommend that at least 2 nodes are available)\r\n* Account on Docker Hub (Create one at https://hub.docker.com/ if you do not have one)\r\n* Access to super user mode (sudo or root)\r\n* (Ability to) Open firewall ports (incoming into the UCP master: 443, 2376, 12376, 12379, 12380, 12381, 12382)\r\n\r\n### Default installation\r\nLet's make one of the nodes as the UCP server / master. The other(s) would be the agent(s) or slave(s). UCP uses swarm under the hood, so the concept is the same as the \"swarm manager\" and the \"swarm joined nodes\", if you're familiar with swarm. Installation involves installation and configuration of UCP components on both sets of nodes. Ideally in a production setup a configuration management engine such as Puppet/Chef would be leveraged to automate this task.\r\n\r\nTo perform the installation manually, follow the steps below:\r\nOn one of the node (preferably the beefier one, which has nothing else other than default OS and related utilities installed), run this command.\r\n```\r\ndocker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock --name ucp dockerorca/ucp install -i\r\n```\r\nYou'll be prompted for additional information:\r\n```\r\nUnable to find image 'dockerorca/ucp:latest' locally\r\nlatest: Pulling from dockerorca/ucp\r\n\r\nf08f7de64c4e: Pull complete\r\n87a6bbaf1f90: Pull complete\r\nDigest: sha256:ed7e723c1a42d0b09b3b7e2743dd61543140363c6aa18c5ea9856fca823f3be8\r\nStatus: Downloaded newer image for dockerorca/ucp:latest\r\nINFO[0000] Verifying your system is compatible with UCP\r\nPlease choose your initial Orca admin password:\r\nConfirm your initial password:\r\nINFO[0010] Pulling required images\r\nPlease enter your Docker Hub username: anoop\r\nPlease enter your Docker Hub password:\r\nPlease enter your Docker Hub e-mail address: xxxanoop@xxl.com\r\nINFO[0044] Pulling required images\r\nWARN[0055] None of the hostnames we'll be using in the UCP certificates [ip-172-31-39-14 127.0.0.1 172.17.0.1 172.31.39.14] contain a domain component.  Your generated certs may fail TLS validation unless you only use one of these shortnames or IPs to connect.  You can use the --san flag to add more aliases\r\n\r\nYou may enter additional aliases (SANs) now or press enter to proceed with the above list.\r\nAdditional aliases: ec2-xx-xx-115-5.compute-1.amazonaws.com\r\nINFO[0065] Installing UCP with host address 172.31.39.14 - If this is incorrect, please use the '--host-address' flag to specify a different address\r\nINFO[0003] Generating Swarm Root CA\r\nINFO[0015] Generating UCP Root CA\r\nINFO[0017] Deploying UCP Containers\r\nINFO[0023] UCP instance ID: 4F5R:LFCQ:LPTF:XOCL:G3L4:JEVR:LUIP:RZDW:42U6:3ZBE:PLN2:IEDG\r\nINFO[0023] UCP Server SSL: SHA1 Fingerprint=81:A0:50:E6:39:EC:A1:34:D9:95:CD:F3:42:C7:68:9B:FD:57:69:36\r\nINFO[0023] Login as \"admin\"/(your admin password) to UCP at https://172.31.39.14:443\r\n```\r\nIf, like me, you love to see what's going on under the hood or in the event you need to troubleshoot issues, add the `--debug` flag like below:\r\n```\r\ndocker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock --name ucp dockerorca/ucp install -i --debug\r\n```\r\n\r\n### Re-installing (when things go wrong or just for the heck of it)\r\n\r\nIf you want to reinstall UCP there are two ways to do that. The automated way is to just run the command below:\r\n```\r\ndocker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock --name ucp dockerorca/ucp install -i --fresh-install\r\n```\r\nThe `--fresh-install` flag will ensure that the environment is cleaned of all ucp related containers, images and volumes.\r\n\r\nYou could do the same manually using the commands below (warning: this may delete data, use at your own risk)\r\n```\r\ndocker rm -f $(docker ps -qa) && docker rmi -f $(docker images -qa) && docker volume rm $(docker volume ls -q)\r\n```\r\nAnd then use the same command as above to re-run with `install -i`.\r\n\r\n### Uninstalling\r\n\r\n```\r\ndocker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock --name ucp dockerorca/ucp uninstall\r\n```\r\n\r\n### External CA\r\n\r\n### External Logging\r\n\r\n### External User repository (LDAP)\r\n","google":"UA-1020564-1","note":"Don't delete this file! It's used internally to help with page regeneration."}